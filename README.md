# TradeGuard - 交易風險計算器

一站式交易風險管理工具，支援台灣與美國市場的股票融資融券、期貨、選擇權風險計算，搭配即時行情與 K 線圖表。

## 功能特色

### 股票融資融券
- 支援台灣（融資/融券）與美國（Margin Long/Short）市場
- 個股、指數 ETF、槓桿 ETF 三種產品類型
- 即時計算維持率、追繳線、斷頭線
- 完整費用計算（手續費、證交稅、融資利息、借券費）
- 壓力測試：模擬不同價格下的風險狀態
- 券商處置流程說明（追繳通知、強制平倉時間點）

### 期貨
- 台灣期貨（大台、小台、微台、電子、金融、股票期貨）
- 美國期貨（E-mini / Micro E-mini S&P、Nasdaq、Dow）
- 即時抓取期交所（TAIFEX）最新保證金資料
- 原始保證金、維持保證金、每點價值自動帶入
- 手續費與期交稅計算
- 自訂初始權益數（1x ~ 5x 保證金快捷按鈕）
- 風險指標（RI%）與追繳 / 砍倉價位計算

### 選擇權
- 買方（Buyer）與賣方（Seller）風險計算
- 台灣（台指選擇權）與美國（SPX / SPY Options）市場
- 手續費與交易稅整合
- 買方最大損失、賣方保證金壓力分析
- 到期損益與 Greeks 參考

### 即時行情
- 9 大指數即時報價：加權、S&P 500、Nasdaq、道瓊、費半、日經 225、KOSPI、上證、恆生
- 多資料來源架構（TWSE 證交所、Yahoo Finance、Finnhub）
- 可在設定中自訂顯示哪些指數
- 一鍵帶入行情到計算表單

### K 線圖表
- 整合 TradingView 圖表元件
- 快捷切換全球主要指數
- 支援自訂代碼查詢（如 2330、AAPL）
- 可直接在 TradingView 開啟完整功能

### 計算公式透明
- 每筆計算皆附完整公式展開，顯示每個變數的實際數值
- 包含券商/期貨商處置流程（何時追繳、何時強制平倉）

## 技術架構

```
Stock/
├── index.html      # 主頁面結構
├── css/
│   └── style.css   # 深色主題 RWD 樣式
├── js/
│   └── app.js      # 全部應用邏輯（即時計算、API 串接、圖表）
└── README.md
```

- **純前端**：HTML + CSS + Vanilla JavaScript，無需後端或建置工具
- **即時計算**：表單輸入即時觸發計算，無需按送出按鈕
- **響應式設計**：支援桌面、平板、手機瀏覽
- **深色主題**：專為交易者設計的低眼壓介面
- **CORS 代理**：透過 allorigins / corsproxy.io 存取跨域 API
- **資料來源**：
  - TWSE 證交所 — 台灣上市即時報價
  - Yahoo Finance — 全球指數與個股
  - Finnhub — 美股即時報價（需 API Key）
  - TAIFEX 期交所 Open Data — 期貨保證金即時查詢

## 使用方式

直接用瀏覽器開啟 `index.html` 即可使用，不需要安裝任何套件。

```bash
# 或使用任意 HTTP Server
npx serve .
```

## 設定

點擊右上角齒輪按鈕可調整：

- **報價來源**：台灣市場（TWSE / Yahoo）、美國市場（Yahoo / Finnhub）
- **顯示指數**：勾選要在行情列顯示的指數
- **自動取報價**：開啟頁面時自動抓取最新行情
- **圖表偏好**：K 線型態、時間週期
- **字體大小**：5 段縮放（XS ~ XL）

## 免責聲明

本工具僅供學習與參考用途，實際交易規則、保證金、費率以各券商及期貨商公告為準。投資有風險，使用者應自行評估並承擔交易決策之責任。

## License

MIT
